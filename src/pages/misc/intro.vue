<script lang="ts" setup>
import { CalendarOutlined, DownloadOutlined, ManOutlined } from '@vicons/antd'
import { CurrentLocation, Man } from '@vicons/tabler'
import dom2image from 'dom-to-image'
import furry_be6367f330fbb49da59f46cfb063b7fbfba41732 from '~/assets/furry_be6367f330fbb49da59f46cfb063b7fbfba41732.webp'
import information from '~/data/information'

definePageMeta({
	name: 'æ‰©åˆ—æ¡'
})

const container = useTemplateRef<HTMLDivElement>('container')

const scale = ref(3)

const download = async () => {
	if (container.value === null) {
		return
	}

	const url = await dom2image.toPng(container.value, {
		width: container.value.clientWidth * scale.value,
		height: container.value.clientHeight * scale.value,
		style: {
			transform: `scale(${scale.value})`,
			transformOrigin: 'top left'
		}
	})

	const a = document.createElement('a')

	a.download = 'intro.png'
	a.href = url
	a.click()
}
</script>

<template>
	<div class="container mx-auto mt-5">
		<n-flex vertical>
			<custom-page-header/>

			<n-card size="small">
				<n-flex align="center" vertical>
					<n-form-item :show-feedback="false" label="ç¼©æ”¾å€æ•°" label-placement="left">
						<n-input-number v-model:value="scale" :step="1"/>
					</n-form-item>

					<div ref="container" class="bg-[#111] p-10">
						<n-flex vertical>
							<n-flex justify="center">
								<n-card class="w-fit" size="small">
									<n-flex align="center">
										<div class="size-20">
											<n-image :img-props="{ class: 'size-full' }" :src="information.avatar" class="rounded-full"/>
										</div>

										<n-flex :size="0" vertical>
											<n-flex align="center" size="small">
												<n-h2 class="!my-0 text-3xl fw-extrabold">
													<n-flex :size="0">
														<span>æ¸£æ¸£</span>
														<n-text :depth="3">120</n-text>
													</n-flex>
												</n-h2>

												<n-text class="inline-flex" type="info">
													<n-icon :component="ManOutlined" size="16"/>
												</n-text>
											</n-flex>

											<n-text class="text-xl fw-bold" type="success">QQ: 2331281251</n-text>
										</n-flex>
									</n-flex>
								</n-card>

								<n-card class="w-fit" size="small">
									<n-flex align="center" size="small">
										<n-icon :component="CurrentLocation" size="16"/>
										<span>æ±Ÿè¥¿çœ èµ£å·å¸‚ ç« è´¡åŒº</span>
									</n-flex>

									<n-flex align="center" size="small">
										<n-icon :component="CalendarOutlined" size="16"/>

										<n-flex :size="0">
											<span>2006/5/7</span>

											<n-text :depth="3" class="scale-80">(å±ç‹— é‡‘ç‰›åº§)</n-text>
										</n-flex>
									</n-flex>

									<n-flex align="center" size="small">
										<n-icon :component="Man" size="16"/>

										<n-flex size="small">
											<n-text type="info">INTJ-A-H</n-text>
											<n-text type="warning">176cm 99kg</n-text>
										</n-flex>
									</n-flex>
								</n-card>
							</n-flex>

							<n-card class="w-fit mx-auto" size="small">
								<n-flex size="small">
									<span>å­¦ä¹ å¾ˆå·® ç›®å‰æ˜¯</span>
									<n-text type="info">æ±Ÿè¥¿åº”ç”¨å·¥ç¨‹èŒä¸šå­¦é™¢ (ä¸‹åŸ æ ¡åŒº) 24 çº§æ–°ç”Ÿ</n-text>
									<n-text type="warning">è®¡ç®—æœºåº”ç”¨æŠ€æœ¯ä¸“ä¸š</n-text>
								</n-flex>
							</n-card>

							<n-alert title="æ³¨æ„äº‹é¡¹" type="warning">
								<n-flex justify="space-between">
									<span class="text-xl fw-bold">!!!</span>

									<span class="text-2xl fw-extrabold">
							ä¸ä¼šæ¶©æ¶© ä¸çº¦ ä¸æ˜¯åŒ ä¸æƒ³æ‹çˆ± ä¸æ‰¾å¯¹è±¡ ä¸å½“å¯¹è±¡ åªæƒ³åšè‡ªå·±
						</span>

									<span class="text-xl fw-bold">!!!</span>
								</n-flex>
							</n-alert>

							<n-flex>
								<n-card class="flex-1" size="small">
									<n-flex>
										<n-image :img-props="{ class: 'size-full' }" :src="furry_be6367f330fbb49da59f46cfb063b7fbfba41732" class="w-90"/>

										<n-flex :size="0" vertical>
											<span>æ˜¯åªç¦ç‘</span>
											<n-text type="info">ç‰©ç§æ˜¯ç‹— !</n-text>
											<n-text type="error">ä¸å¯ä»¥æˆ³ !!</n-text>
											<n-text :depth="3">æš‚æ—¶è¿˜æ²¡æœ‰åå­—</n-text>
										</n-flex>
									</n-flex>
								</n-card>

								<n-flex class="flex-1" vertical>
									<n-card size="small">
										<n-flex :size="0" vertical>
											<span class="text-xl">æ˜¯å…¨æ ˆå¼€å‘</span>

											<div class="h-1"/>

											<n-flex size="small">
												<span>æœ‰è‡ªå·±çš„ä¸ªäººç½‘ç«™: </span>
												<n-text type="success">https://zhazha120.cn</n-text>
											</n-flex>

											<div class="h-1"/>

											<n-text type="info">æˆ–è®¸å•¥æŠ€æœ¯éƒ½ä¼šç‚¹ å–œæ¬¢æ¢ç´¢å°è¯•æ–°ä¸œè¥¿</n-text>
											<n-text type="info">å–œæ¬¢å¼€æº æœ‰è‰¯å¥½çš„ git æäº¤æ¶ˆæ¯è§„èŒƒ</n-text>

											<div class="h-1"/>

											<n-text :depth="3">
												å–œæ¬¢ç© <span class="fw-extrabold">ç°ä»£ä¿„ç½—æ–¯æ–¹å—</span> å’Œ <span class="fw-extrabold">4k</span>
											</n-text>
										</n-flex>
									</n-card>

									<n-alert type="error">
										ä¸æŠ½çƒŸ ä¸å–é…’ ä¸ä¼šæ‰“éº»å°†
									</n-alert>

									<n-alert type="success">
										<template #icon>ğŸ˜‹</template>

										çˆ±å–å¥¶èŒ¶ å¹¶å°¤å…¶å–œæ¬¢å¤èŒ— (?)
									</n-alert>

									<n-card size="small">
										å¯ä»¥é¢åŸº ä½†ä»…é™è§é¢ å¯èƒ½æ¯”è¾ƒç¤¾æ é‡åˆ°ä¸çŸ¥é“èŠä»€ä¹ˆçš„å°´å°¬æƒ…å†µå¯èƒ½ä¼šä¸€ç›´çœ‹æ‰‹æœº å¸Œæœ›ä¸è¦å«Œå¼ƒæˆ‘...
									</n-card>
								</n-flex>
							</n-flex>
						</n-flex>
					</div>
				</n-flex>

				<template #action>
					<div class="text-center">
						<n-button @click="download">
							<template #icon>
								<n-icon :component="DownloadOutlined"/>
							</template>

							ä¸‹è½½
						</n-button>
					</div>
				</template>
			</n-card>
		</n-flex>
	</div>
</template>